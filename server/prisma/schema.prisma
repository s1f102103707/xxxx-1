datasource db {
  provider = "postgresql"
  url      = env("API_DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id    String  @id @default(uuid())
  email String  @unique
  name  String?
  bets  Bet[]
}

model Horse {
  id           Int           @id @default(autoincrement())
  name         String
  breed        String?
  birthDate    DateTime?
  performances Performance[]
  Bet          Bet[]
}

model Race {
  id           Int           @id @default(autoincrement())
  name         String
  location     String
  scheduledAt  DateTime
  performances Performance[]
  bets         Bet[]
}

model Performance {
  id       Int    @id @default(autoincrement())
  position Int?
  time     Float?
  horseId  Int
  raceId   Int
  horse    Horse  @relation(fields: [horseId], references: [id])
  race     Race   @relation(fields: [raceId], references: [id])
}

model Bet {
  id      Int     @id @default(autoincrement())
  amount  Float
  betType BetType
  userId  String
  raceId  Int
  horseId Int
  user    User    @relation(fields: [userId], references: [id])
  race    Race    @relation(fields: [raceId], references: [id])
  horse   Horse   @relation(fields: [horseId], references: [id])
}

enum BetType {
  WIN
  PLACE
  SHOW
}
